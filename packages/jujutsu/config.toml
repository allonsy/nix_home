[ui]
default-command = ["status"]
editor = "vim"
conflict-marker-style = "git"
merge-editor = "mergiraf"

[aliases]
bk = ["bookmark"]
push = ["git", "push"]
pull = ["git", "fetch"]
fork = ["new", "--after", "trunk()", "--before", "@", "--no-edit"]
clean = ["new", "bookmarks() & mine()"]
ll = ["log", "-r", "(trunk()..mine()):: | trunk()"]
la = ["log", "-r", "::"]

[git]
push-new-bookmarks = true
auto-local-bookmark = true

[merge-tools.pycharm]
program = "pycharm"
merge-args = ["merge", "$left", "$right", "$base", "$output"]
edit-args = ["diff", "$left", "$right"]

[revsets]
log = "trunk()..@ | trunk()"

[templates]
git_push_bookmark = '"alec/" ++ change_id.short()'

[fix.tools.ruff-lint]
command = ["uvx", "ruff", "check", "--force-exclude", "--fix-only", "--stdin-filename=$path"]
patterns = ["glob:'**/*.py'"]

[fix.tools.ruff-format]
command = ["uvx", "ruff", "format", "--force-exclude", "--stdin-filename=$path"]
patterns = ["glob:'**/*.py'"]
